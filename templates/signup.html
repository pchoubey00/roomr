<!DOCTYPE html>
<html>
    <head>
        <title> roomr - signup </title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles2.css')}}"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">

    </head>
    <body>
        <nav id="sidebar"><br>
            <div id="headercontainer">
                <h3 id="bartitle"><b>roomr</b></h3>
            </div>
            <div id="barlinks">
                    <a href="{{url_for('home')}}" id="baritem">Home</a> 
                    {% if current_user.is_authenticated %}
                        <a href="{{url_for('user')}}" id="baritem" >Profile</a> 
                        <a href="{{url_for('editProfile')}}" id="baritem" >Edit Profile</a>
                        <a href="{{url_for('logout')}}" id="baritem" >Logout</a> 
                        <a href="{{url_for('chatform')}}" id="baritem" >Chat</a>
                    {% else %}
                        <a href="{{url_for('login')}}" id="baritem">Login</a> 
                        <a href="{{url_for('signup')}}" id="baritem" >Signup</a> 
                    {%endif%}   
                </div>
        </nav>
    
    
        <div class="content" >
            <h1> Sign Up </h1>
            {% for message in get_flashed_messages() %} 
            <div class="alert">
                <!-- <button type="button" class="close" data-dismiss="alert">&times;</button> -->
                {{ message }}
            </div>
            {% endfor %}
            <form method="POST" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                {{ form.fname.label }}: {{ form.fname(size = 15, maxlength = 32) }}<br>
                {{ form.lname.label }}: {{ form.lname(size = 15, maxlength = 32) }}<br>
                {{ form.email.label }}: {{ form.email(type="email", size = 30, maxlength = 64) }}<br>
                {{ form.email2.label }}: {{ form.email2(type="email", size = 30, maxlength = 64) }} 
                {% for error in form.email.errors %}
                    <span class = "error">{{ error}}</span>
                {% endfor %}
                <br>
                {{ form.dob.label }}: {{ form.dob(type="date", size = 8, maxlength = 8) }}<br>
                {{ form.password.label }}: {{ form.password(type="password") }}<br>
                {{ form.password2.label }}: {{ form.password2(type="password") }}
                {% for error in form.password.errors %}
                    <span class = "error">{{ error}}</span>
                {% endfor %}
                <br>
                <br>
                {{ form.profilePicture.label }} : {{ form.profilePicture() }} <br>
                Location <br>
                {{ form.state.label }} : {{ form.state() }}
                {{ form.city.label }} : {{ form.city() }} <br>
                {{ form.gender.label }} : {{ form.gender() }} <br>
                {{ form.bio.label }} : {{ form.bio() }} <br>
                {{ form.smoker.label }} : {{ form.smoker() }} <br>
                {{ form.sleepPattern.label }} : {{ form.sleepPattern() }} <br>
                {{ form.genderPreferences.label }} : {{ form.genderPreferences() }} <br>
                {{ form.cleanliness.label }}: {{ form.cleanliness()}}<br>
                <br>

                {{ form.submit() }}
            </form>
            <script>
                var state_select = document.getElementById("state");
                var city_select = document.getElementById("city");
        
                state_select.onchange = function()  {
                     
                    state = state_select.value;
                    
                    fetch('/city/' + state).then(function(response) {
        
                        response.json().then(function(data) {
                            var optionHTML = '';
        
                            for (var city of data.cities) {
                                optionHTML += '<option value="' + city.state + '">' + city.name + '</option>';
                            }
        
                            city_select.innerHTML = optionHTML;
                        })
                        
                    });
                }
            </script>
        </div>
    </body>
</html>
